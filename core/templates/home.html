{% extends 'header.html' %}
{% load static %}
{% block content %}

<h2>Suas Caronas</h2>
<div class="caronas">
    {% if caronas %}
        {% for carona in caronas %}
            <div class="carona">
                <p> Carona {{ carona.id }}</p>
                <p> Caroneiros: {{ carona.get_caroneiros_nomes }} </p>
                <hr>
            </div>
        {% endfor %}
    {% endif %}
</div>

<h2>Suas Solicitações</h2>
<div class="solicitacoes">
    {% for solicitacao in solicitacoes %}
        <div class="solicitacao">
            <p>Solicitação {{ solicitacao.id }} de {{ solicitacao.enviado_por }} enviada em {{ solicitacao.enviado_em }}</p>
            <p>Mensagem: {{ solicitacao.mensagem }}. Visualizada? {{ solicitacao.visualizada }} Respondida? {{ solicitacao.respondida }}</p>
            <hr>
        </div>
    {% endfor %}
</div>

<h2>Suas Conversas</h2>
    <ol class="list-group">
        {% load conversa_tags %}
        {% for conversa in conversas %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
              <img class="img-thumbnail" style="max-height: 60px; max-width: 60px; margin-right: 10px" src="{% static 'diogo.png' %}" alt="" />
              <div class="ms-3">
                <p class="fw-bold mb-0">{% conversa_get_mensagem_membro request conversa %}</p>
                <p class="text-muted mb-0 fs-sm">{% get_ultimo_enviador_mensagem_e_menssagem conversa %}</p>
              </div>
            </div>
                {% conversa_get_mensagens_nao_visualizadas request conversa as count %}
                {% if count != 0 %}
                    <span class="badge bg-primary rounded-pill">{% conversa_get_mensagens_nao_visualizadas request conversa %}</span>
                {% endif %}
          </li>
        {% endfor %}
    </ol>
{% endblock %}
